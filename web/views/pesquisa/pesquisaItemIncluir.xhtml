<html xmlns:c="http://java.sun.com/jsp/jstl/core"    
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"                   
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">
    
    <h:head>
        <title>Incluir item</title>
    </h:head>
    <h:body>
        <p:ajaxStatus onstart="PF('statusDialog').show();" onsuccess="PF('statusDialog').hide();" widgetVar="statusDialog" />
        <p:dialog modal="true" widgetVar="statusDialog" header="Processando..." draggable="false" closable="false" resizable="false">                               
            <p:graphicImage value="#{pageContext.servletContext.contextPath}/resources/imagens/onsys/bar180.gif" /> 
        </p:dialog>         
        <script type="text/javascript">
            function startMessage() {
                 statusDialog.show();
            }
            function finishMessage() {
                statusDialog.hide();
            }
        </script>
        <style> 
            .ui-datatable .ui-datatable-data .even-row td{
                background-color:#EEDD82;                          
                font-size: 12px; 
                height: 10px;  
            }
            .ui-datatable .ui-datatable-data .odd-row td{
                background-color:#FFFACD;
                font-size: 12px; 
                height: 10px;                         
            }                    
        </style>
        <h:form id="fmPesquisaItemIncluir">
            <script type="text/javascript" src="../../../../resources/js/jquery.price_format.js"></script> 
            <script type="text/javascript" src="../../../../resources/js/locale-primefaces.js" ></script>
            <p:toolbar style="height: 35px">
                <f:facet name="left">
                    <p:commandButton title="Salvar dados do registro corrente" 
                                     action="#{pesquisaItemIncluirFace.fecharDialogo()}" 
                                     style="height: 30px; width: 120px;"
                                     styleClass="GreenButton"
                                     value="Salvar"
                                     update="fmPesquisaItemIncluir"
                                     icon="fa fa-check white"
                                     alt="Salvar dados do registro corrente"
                                     process="@form"
                                     onclick="PF('PrimeFaces.monitorDownload(startMessage, finishMessage)')"/>                                
                    <p:spacer width="5" height="5"/>                        
                    <p:commandButton style="height: 30px; width: 120px;"
                                     styleClass="RedButton" 
                                     update="@none"                   
                                     value="Voltar"
                                     process="@this" 
                                     immediate="true"  
                                     icon="fa fa-reply Fs12 white" 
                                     action="#{pesquisaItemIncluirFace.fecharDialogoCancelar(itemFace.registroSelecionado)}"                                      
                                     title="Fechar." 
                                     onclick="PF('PrimeFaces.monitorDownload(startMessage, finishMessage)')"
                                     alt="Fechar."/>
                </f:facet>
            </p:toolbar>
            <div class="ui-fluid">
                <p:panelGrid layout="grid" columns="4" 
                            columnClasses="ui-grid-col-2, ui-grid-col-4, ui-grid-col-2, ui-grid-col-4"                                         
                            id="dadosGerais" styleClass="semBorda" 
                            rendered="#{itemFace.registroSelecionado != null}"
                            style="border: none !important; background-color: #dddddd">   

                    <p:outputLabel value="Código" for="codigo" style="color: red"/>
                    <p:inputText value="#{itemFace.registroSelecionado.codigo}" id="codigo">
                        <!--
                        <p:ajax update="messagesDadosGerais" event="blur" listener="#{itemFace.existente(itemFace.registroSelecionado)}"/>
                        -->
                    </p:inputText>    

                    <p:outputLabel value="Descrição" for="descricao" style="color: red"/>
                    <p:inputText value="#{itemFace.registroSelecionado.descricao}" maxlength="60" id="descricao"/>       

                    <p:outputLabel value="Categoria" for="catItem" style="color: black"/>
                    <p:selectOneMenu id="catItem" 
                                     style="max-width: 300px!important" 
                                     value="#{itemFace.registroSelecionado.catitem}" var="p">
                        <f:selectItem itemValue=" " itemLabel=" "/>
                        <f:selectItems var="itemSel" itemLabel="#{itemSel.descricao}"  itemValue="#{itemSel}" 
                                       value="#{catItemFace.listAtivos}"/>
                        <p:column>#{p.codigo} - #{p.descricao}</p:column>
                        <p:ajax process="catItem"/>
                        <f:converter converterId="catItemConverter"/>
                    </p:selectOneMenu> 

                    <p:outputLabel value="Subcategoria" for="subCatItem" style="color: black"/>
                    <p:selectOneMenu id="subCatItem" 
                                     style="max-width: 300px!important" 
                                     value="#{itemFace.registroSelecionado.subcatitem}" var="p">
                        <f:selectItem itemValue=" " itemLabel=" "/>
                        <f:selectItems var="itemSel" itemLabel="#{itemSel.descricao}"  itemValue="#{itemSel}" 
                                       value="#{subcatItemFace.list}"/>
                        <p:column>#{p.codigo} - #{p.descricao}</p:column>
                        <p:ajax process="subCatItem"/>
                        <f:converter converterId="subcatItemConverter"/>
                    </p:selectOneMenu>

                    <p:outputLabel value="UN" for="unidadeMedida" style="color: red"/>
                    <p:selectOneMenu id="unidadeMedida" 
                                     style="max-width: 300px!important" 
                                     value="#{itemFace.registroSelecionado.unidademedida}" var="p">
                        <f:selectItem itemValue=" " itemLabel=" "/>
                        <f:selectItems var="itemSel" itemLabel="#{itemSel.descricao}"  itemValue="#{itemSel}" 
                                       value="#{unidadeMedidaFace.list}"/>
                        <p:column>#{p.un} - #{p.descricao}</p:column> 
                        <p:ajax process="unidadeMedida"/>
                        <f:converter converterId="unidadeMedidaConverter"/>
                    </p:selectOneMenu>

                    <p:spacer width="5"/><p:spacer width="5"/>                     

                </p:panelGrid>                                
            </div>
            <h:outputText value="Campo(s) obrigatório(s)." style="color: red; font-weight: 700"/>
            <script type="text/javascript">
                jQuery('.monetario').priceFormat({
                       prefix : 'R$ '
                    });
                $(document).ready(function() {
                    widigetVar.select(0);
                });                        
                jQuery('.decimal').priceFormat({
                       prefix : '  '
                    });
            </script>
        </h:form>
    </h:body>
</html>