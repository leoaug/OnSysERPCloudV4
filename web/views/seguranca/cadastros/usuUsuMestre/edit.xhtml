<html xmlns:c="http://java.sun.com/jsp/jstl/core">    
    <ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                    xmlns:p="http://primefaces.org/ui"
                    template="/WEB-INF/template.xhtml"
                    xmlns:f="http://java.sun.com/jsf/core"
                    xmlns:h="http://java.sun.com/jsf/html">
        <ui:define name="conteudo">  
            <f:view contentType="text/html; charset=utf-8"> 
                <h:head>  
                    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>  
                </h:head>                
                <p:ajaxStatus onstart="PF('statusDialog').show();" onsuccess="PF('statusDialog').hide();" widgetVar="statusDialog" />
                <p:dialog modal="true" widgetVar="statusDialog" header="Processando..." draggable="false" closable="false" resizable="false">                               
                    <p:graphicImage value="#{pageContext.servletContext.contextPath}/resources/imagens/onsys/bar180.gif" /> 
                </p:dialog>         
                <script type="text/javascript">
                    function startMessage() {
                         statusDialog.show();
                    }
                    function finishMessage() {
                        statusDialog.hide();
                    }
                </script>       
                <h:form id="fmEditar">
                    <script type="text/javascript" src="../../../../resources/js/jquery.price_format.js"></script> 
                    <script type="text/javascript" src="../../../../resources/js/locale-primefaces.js" ></script>
                    <p:panel header="Alterar relação usuário mestre x usuario - #{usuUsuMestreFace.usuarioMestreSelecionado.apelido}">
                        <p:toolbar style="height: 35px">
                            <f:facet name="left">
                                <p:commandButton title="Salvar dados do registro corrente e voltar para lista." 
                                                 action="#{usuUsuMestreFace.fimEditar()}" 
                                                 style="height: 30px; width: 100px;"
                                                 styleClass="GreenButton"
                                                 value="Salvar"
                                                 icon="fa fa-check white"
                                                 process="@form"
                                                 onclick="PF('PrimeFaces.monitorDownload(startMessage, finishMessage)')"/>                                
                                <p:spacer width="3" height="3"/>
                                <p:commandButton immediate="true" action="#{usuUsuMestreFace.listar()}" 
                                                 style="height: 30px; width: 100px;"
                                                 icon="fa fa-reply Fs12 white"
                                                 value="Voltar"
                                                 styleClass="RedButton"
                                                 title="Voltar para lista." 
                                                 onclick="PF('PrimeFaces.monitorDownload(startMessage, finishMessage)')"/>
                                <p:spacer width="3" height="3"/>
                                <p:growl id="messages" showDetail="true"/>  
                            </f:facet>
                        </p:toolbar>                        
                        <table id="tdSize15" cellspacing="5">
                            <tr>
                                <td>
                                    <h:outputText value="Usuário" style="color: black"/>
                                </td>
                                <td>
                                    <p:inputText disabled="true" value="#{usuUsuMestreFace.usuarioMestreSelecionado.apelido}" 
                                                     style="color: blue; font-weight: 700; opacity: 1!important">
                                    </p:inputText>
                                </td>
                            </tr>
                        </table>
                        <h:outputText value="Usuários" style="color: red"/>
                        <div class="EmptyBox10"></div>
                        <p:pickList id="pickList" value="#{usuUsuMestreFace.usuario}" var="usuario"
                                    converter="usuarioConverter2" styleClass="semBorda FontBold Fs12"
                                    filterMatchMode="contains" responsive="true" 
                                    itemLabel="#{usuario.email} - #{usuario.apelido}" itemValue="#{usuario}" 
                                    showSourceFilter="true" showTargetFilter="true">
                            
                            <f:facet name="sourceCaption">Usuários disponíveis</f:facet>
                            <f:facet name="targetCaption">Usuários do usuário mestre</f:facet>
                            
                            <p:ajax event="transfer" listener="#{usuUsuMestreFace.manter}" update="messages"/>
                            
                        </p:pickList>
                    </p:panel>
                </h:form>
            </f:view>
        </ui:define>
     </ui:composition>
</html>