<html xmlns:c="http://java.sun.com/jsp/jstl/core"    
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"                   
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">

    <h:head>
        <title>Incluir cliente</title>
    </h:head>
    <h:body>
        <p:ajaxStatus onstart="PF('statusDialog').show();" onsuccess="PF('statusDialog').hide();" widgetVar="statusDialog" />
        <p:dialog modal="true" widgetVar="statusDialog" header="Processando..." draggable="false" closable="false" resizable="false">                               
            <p:graphicImage value="#{pageContext.servletContext.contextPath}/resources/imagens/onsys/bar180.gif" /> 
        </p:dialog>         
        <script type="text/javascript">
            function startMessage() {
                 statusDialog.show();
            }
            function finishMessage() {
                statusDialog.hide();
            }
        </script>
        <h:form id="fmPesquisaClienteIncluir">
            <script type="text/javascript" src="../../../../resources/js/jquery.price_format.js"></script> 
            <script type="text/javascript" src="../../../../resources/js/locale-primefaces.js" ></script>
            <p:toolbar style="height: 35px">
                <f:facet name="left">
                    <p:commandButton title="Salvar dados do registro corrente" 
                                     action="#{pesquisaClienteIncluirFace.fecharDialogo()}" 
                                     style="height: 30px; width: 120px;"
                                     styleClass="GreenButton"
                                     value="Salvar"
                                     update="fmPesquisaClienteIncluir,messagesPesquisaIncluir"
                                     icon="fa fa-check white"
                                     alt="Salvar dados do registro corrente"
                                     process="@form"
                                     onclick="PF('PrimeFaces.monitorDownload(startMessage,finishMessage)')"/>                                
                    <p:spacer width="5" height="5"/>                        
                    <p:commandButton style="height: 30px; width: 120px;"
                                     styleClass="RedButton" 
                                     update="@none"                   
                                     value="Voltar"
                                     process="@this" 
                                     immediate="true"  
                                     icon="fa fa-reply Fs12 white" 
                                     action="#{pesquisaClienteIncluirFace.fecharDialogoCancelar(clienteFace.registroSelecionado)}"                                      
                                     title="Fechar." 
                                     onclick="PF('PrimeFaces.monitorDownload(startMessage, finishMessage)')"
                                     alt="Fechar."/>
                </f:facet>
            </p:toolbar>
            <p:growl id="messagesPesquisaIncluir" showDetail="true"/>
            <div class="ui-fluid">
                <c:if test="${clienteFace.naturezaPJPF eq '1'}">  
                    <p:focus for="cnpj"/>
                </c:if>                                         
                <c:if test="${clienteFace.naturezaPJPF eq '2'}">
                    <p:focus for="cpf"/>                    
                </c:if>                                                             
                <p:panelGrid layout="grid" columns="4" 
                             columnClasses="ui-grid-col-2, ui-grid-col-4, ui-grid-col-2, ui-grid-col-4"
                             id="pnlGrDadosGerais" styleClass="semBorda"

                             style="border: none !important; background-color: #dddddd">

                    <p:outputLabel for="natureza" value="Natureza" style="color: black"/>
                    <p:selectOneRadio styleClass="semBorda" id="natureza" value="#{clienteFace.naturezaPJPF}" 
                                      style="border: none !important;"
                                      layout="responsive" columns="2"
                                      onchange="javascript:submit()">  
                        <f:selectItem itemLabel="Pessoa jurídica" itemValue="1" />  
                        <f:selectItem itemLabel="Pessoa física"   itemValue="2" />                                                 
                    </p:selectOneRadio>   

                    <c:if test="${clienteFace.naturezaPJPF eq '1'}">  
                        <p:outputLabel value="CNPJ" style="color: red" for="cnpj"/>
                        <p:inputMask id="cnpj" value="#{clienteFace.registroSelecionado.cnpjcpf}"  
                                     placeholder="Qual é o CNPJ ?"
                                     mask="99.999.999/9999-99">
                            <p:ajax process="cnpj" event="blur" listener="#{clienteFace.preencherCNPJ()}" 
                                    update="razaoSocial,nomeFantasia,cep,logradouro,numero,cidade,bairro,uf,complemento,telefone,messagesPesquisaIncluir"/>
                        </p:inputMask>                     
                    </c:if>                                         
                    <c:if test="${clienteFace.naturezaPJPF eq '2'}">  
                        <p:outputLabel value="CPF" style="color: red" for="cpf"/>
                        <p:inputMask id="cpf" value="#{clienteFace.registroSelecionado.cnpjcpf}"  
                                         mask="999.999.999-99"/>
                    </c:if>                                         

                    <c:if test="${clienteFace.operacao eq 'A'}">                  
                        <p:outputLabel value="Código" for="codigo" style="color: black"/>
                        <p:inputText id="codigo" disabled="true" style="color: red" value="#{clienteFace.registroSelecionado.codigo}"/>
                    </c:if>
                    <c:if test="${clienteFace.operacao eq 'I'}">                  
                        <p:outputLabel value="Código" style="color: red" for="codigo"/>
                        <p:inputText id="codigo" value="#{clienteFace.registroSelecionado.codigo}"/>
                    </c:if>
                    
                    <c:if test="${clienteFace.naturezaPJPF eq '1'}">  
                        
                        <p:outputLabel value="Razão social" style="color: red" for="razaoSocial"/>
                        <p:inputText id="razaoSocial" value="#{clienteFace.registroSelecionado.razaosocial}"/>
                        
                        <p:outputLabel for="nomeFantasia" value="Nome fantasia" style="color: red"/>
                        <p:inputText value="#{clienteFace.registroSelecionado.nomefantasia}" id="nomeFantasia"/>
                        
                    </c:if>                                         
                    <c:if test="${clienteFace.naturezaPJPF eq '2'}">
                        
                        <p:outputLabel value="Nome completo" style="color: red" for="razaoSocial"/>
                        <p:inputText id="razaoSocial" value="#{clienteFace.registroSelecionado.razaosocial}"/>
                        
                        <p:outputLabel for="nomeFantasia" value="Apelido" style="color: red"/>
                        <p:inputText value="#{clienteFace.registroSelecionado.nomefantasia}" id="nomeFantasia"/>
                        
                    </c:if>                                                             

                    <p:outputLabel value="Data do cadastro" style="color: red" for="dtCadastro"/>
                    <p:calendar id="dtCadastro" value="#{clienteFace.registroSelecionado.datacadastro}" 
                                pattern="dd/MM/yyyy" locale="pt_BR" navigator="true" 
                                style="font-size: 11px"/>
                    
                    <p:outputLabel for="emailPartcipante" value="E-mail" style="color: black"/> 
                    <p:inputText id="emailPartcipante" value="#{clienteFace.registroSelecionado.email}"/> 

                    <p:outputLabel for="telefone" value="Telefone" style="color: black"/>
                    <p:inputText id="telefone" value="#{clienteFace.registroSelecionado.fone}"/>
                    
                    <p:outputLabel value="Representante" for="representante" style="color: red"/>
                    <p:selectOneMenu id="representante" value="#{clienteFace.registroSelecionado.representante}" var="p">
                        <f:selectItems var="itemSel" itemLabel="#{itemSel.apelido}"  itemValue="#{itemSel}" value="#{prospectFace.listRepresentante}"/>
                        <p:column>#{p.codigo} - #{p.apelido}</p:column> 
                        <f:converter converterId="representanteConverter"/>
                    </p:selectOneMenu>
                    
                    <p:spacer width="5"/>                
                    <p:spacer width="5"/>                

                </p:panelGrid>
                <p:panelGrid id="pnlGrEndereco"
                        columns="4" columnClasses="ui-grid-col-1,ui-grid-col-2,ui-grid-col-1,ui-grid-col-8" 
                        rendered="#{clienteFace.registroSelecionado != null}"  
                        style="border: none !important; background-color: #dddddd"
                        layout="grid" styleClass="ui-panelgrid-lightgrey">

                    <p:outputLabel value="CEP" for="cep" style="color: red;"/>
                    <p:inputMask id="cep" value="#{clienteFace.registroSelecionado.cep}" mask="99.999-999" style="width: 90px">
                        <p:ajax process="cep" event="blur" listener="#{clienteFace.preencheEndereco()}"
                                update="logradouro,bairro,uf,cidade"/>
                    </p:inputMask>                

                    <p:outputLabel value="Logradouro" for="logradouro" style="color: red;"/>
                    <p:inputText id="logradouro" value="#{clienteFace.registroSelecionado.logradouro}"
                                 style="text-transform:uppercase;"/>

                </p:panelGrid>            
                <p:panelGrid id="pnlGrEndereco2"
                        columns="4" columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4" 
                        rendered="#{clienteFace.registroSelecionado != null}"  
                        style="border: none !important; background-color: #dddddd"
                        layout="grid" styleClass="ui-panelgrid-lightgrey">

                    <p:outputLabel value="Número" for="numero"  style="color: red"/>
                    <p:inputText id="numero" value="#{clienteFace.registroSelecionado.numero}"
                                  maxlength="10" size="10"
                                 style="text-transform:uppercase;"/>

                    <p:outputLabel value="Cidade" for="cidade"  style="color: red"/>
                    <p:inputText id="cidade" value="#{clienteFace.registroSelecionado.cidade}"
                                 style="text-transform:uppercase;"/>

                    <p:outputLabel value="Bairro" for="bairro"  style="color: red"/>
                    <p:inputText id="bairro" value="#{clienteFace.registroSelecionado.bairro}"
                                 style="text-transform:uppercase;"/>

                    <p:outputLabel value="UF" for="uf"  style="color: red"/>
                    <p:inputText id="uf" value="#{clienteFace.registroSelecionado.uf}"
                                 maxlength="2"
                                 style="text-transform:uppercase;"/>

                    <p:outputLabel value="Complemento" for="complemento" styleClass="Fs12"/>
                    <p:inputText id="complemento" value="#{clienteFace.registroSelecionado.complemento}"
                                 maxlength="30" 
                                 style="text-transform:uppercase;"/>

                    <p:spacer width="5"/>                
                    <p:spacer width="5"/>                

                </p:panelGrid>
            </div>
            <h:outputText value="Campo(s) obrigatório(s)." style="color: red; font-weight: 700"/>
            <script type="text/javascript">
                jQuery('.monetario').priceFormat({
                       prefix : 'R$ '
                    });
                $(document).ready(function() {
                    widigetVar.select(0);
                });                        
                jQuery('.decimal').priceFormat({
                       prefix : '  '
                    });
            </script>
        </h:form>
    </h:body>            
</html>