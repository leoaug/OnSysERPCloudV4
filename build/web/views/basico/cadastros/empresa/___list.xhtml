<html xmlns:c="http://java.sun.com/jsp/jstl/core">
    <ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                    xmlns:p="http://primefaces.org/ui"
                    template="/WEB-INF/template.xhtml"
                    xmlns:f="http://java.sun.com/jsf/core"
                    xmlns:h="http://java.sun.com/jsf/html">
        <ui:define name="conteudo">    
            <f:view contentType="text/html; charset=utf-8">
                <h:head>  
                    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>  
                </h:head>
                <p:ajaxStatus onstart="PF('statusDialog').show();" onsuccess="PF('statusDialog').hide();" widgetVar="statusDialog" />
                <p:dialog modal="true" widgetVar="statusDialog" header="Processando..." draggable="false" closable="false" resizable="false">                               
                    <p:graphicImage value="#{pageContext.servletContext.contextPath}/resources/imagens/onsys/bar180.gif" /> 
                </p:dialog>         
                <script type="text/javascript">
                    function startMessage() {
                         statusDialog.show();
                    }
                    function finishMessage() {
                        statusDialog.hide();
                    }
                </script>
                <style> 
                    .ui-datatable .ui-datatable-data .even-row td{
			background-color:#EEDD82;                          
                        font-size: 12px; 
                        height: 10px;  
                    }
                    .ui-datatable .ui-datatable-data .odd-row td{
			background-color:#FFFACD;
                        font-size: 12px; 
                        height: 10px;                         
                    }                    
                </style>
                <body onload="#{empresaFace.limparFiltros()}">
                    <h:form id="fmListar">
                    	    <p:panel>
	                            <p:toolbar style="height: 35px" id="toolbar">
	                                <f:facet name="left">
	                                	<c:if test="#{validaAcesso.validaAcesso('/views/basico/cadastros/empresa/list.faces', 'I')}">
	                                        <p:commandButton style="text-align: center; height: 30px; width: 120px;" 
	                                                         title="Incluir novo registro"
	                                                         update="dialogo"
	                                                         value="Incluir"
	                                                         styleClass="OrangeButton"
	                                                         action="#{empresaFace.incluir()}"
	                                                         onclick="PF('PrimeFaces.monitorDownload(startMessage, finishMessage)')"
	                                                         process="@this" icon="fa fa-plus Fs16 white">
	                                        </p:commandButton>
                                        	<p:spacer width="4" height="3"/>
                                    	</c:if>
                                    	
                                    	 <c:if test="#{validaAcesso.validaAcesso('/views/basico/cadastros/empresa/list.faces', 'E')}">
	                                        <p:commandButton style="text-align: center; height: 30px; width: 120px;"
	                                                         update="dialogo,messages"
	                                                         value="Alterar"
	                                                         styleClass="BrownButton"
	                                                         title="Selecione um registro na lista abaixo, para utilizar a função de alteração"
	                                                         action="#{empresaFace.alterar()}" id="bt_editar" icon="fa fa-pencil Fs16 white" 
	                                                         ajax="true" onclick="PF('PrimeFaces.monitorDownload(startMessage, finishMessage)')">                                            
	                                        </p:commandButton>                                    
	                                        <p:spacer width="3" height="3"/>  
                                    	</c:if>                          
	                                    <c:if test="#{validaAcesso.validaAcesso('/views/basico/cadastros/empresa/list.faces', 'C')}">
	                                        <p:commandButton style="text-align: center; height: 30px; width: 120px;" 
	                                                         update="dialogoConsultar,messages"
	                                                         value="Consultar"
	                                                         styleClass="CyanButton"                                                         
	                                                         title="Selecione um registro na lista abaixo, para utilizar a função de consulta"
	                                                         action="#{empresaFace.consultar()}" icon="fa fa-eye Fs16 white"
	                                                         ajax="true" onclick="PF('PrimeFaces.monitorDownload(startMessage, finishMessage)')">                                            
	                                        </p:commandButton>   
	                                        <span class="ui-separator">
	                                            <span class="fa fa-ellipsis-v leaden"/>
	                                        </span>  
	                                    </c:if>                     
	                                    <p:menuButton style="text-align: center; height: 30px; width: 140px;" 
	                                                  value="Mais opções">  
	                                        <c:if test="#{validaAcesso.validaAcesso('/views/basico/cadastros/empresa/list.faces', 'R')}">
	                                            <p:menuitem value="Deletar" action="#{empresaFace.remover()}" 
	                                                        update="dtb,messages"
	                                                        icon="fa fa-trash">
	                                                <p:confirm header="Confirmação"
	                                                    message="Confirma a eliminação ?"
	                                                    icon="ui-icon-alert"/>
	                                            </p:menuitem>
	                                        </c:if>
	                                        <c:if test="#{!favoritosFace.validaExistente()}">
	                                            <p:menuitem value="Adicionar aos favoritos" icon="fa fa-star-o" 
	                                                        update="toolbar"
	                                                        actionListener="#{favoritosFace.criaFavorito(usuarioFace.loggedUser.empresa.codigo)}"/>
	                                        </c:if>
	                                        <c:if test="#{favoritosFace.validaExistente()}">
	                                            <p:menuitem value="Remover dos favoritos" icon="fa fa-star" 
	                                                        update="toolbar"
	                                                        actionListener="#{favoritosFace.deletaFavorito()}"/>
	                                        </c:if>                                    
	                                        <p:menuitem value="Ajuda" icon="fa fa-question"/>
	                                    </p:menuButton>     
	                                
	                                </f:facet>
	                            </p:toolbar>
                            </p:panel>
                    </h:form>
                 </body>